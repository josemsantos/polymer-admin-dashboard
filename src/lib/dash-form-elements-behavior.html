<script>
  'use strict';

  function DashFormElementsBehavior(superClass) {
    return class extends superClass {
      static get properties() {
        return {
        }
      }
      
      _isInput(type) {
        return (this._inputTypes.indexOf(type) > -1);
      }

      _isCheckbox(type) {
        return type === 'checkbox';
      }

      _isCollection(type) {
        return type === 'collection';
      }

      _isDropdown(type) {
        return type === 'dropdown';
      }

      _isReadonly(attributes, showOnly) {
        return (attributes && attributes.readonly || showOnly);
      }

      _isTextonly(attributes) {
        return (attributes && attributes.textOnly);
      }

      _applyDataToElement(field, data) {
        let formField = this.shadowRoot.querySelector('[name=' + field + ']');
        if (formField) {
          if (formField.tagName === 'PAPER-CHECKBOX') {
            formField.checked = data;
          } else {
            formField.value = data;
          }
        }
      }

      _applyExternalDataToElement(field, data) {
        let formField = this.shadowRoot.querySelector('[name=' + field + ']');
        if (formField) {
          if (Array.isArray(data)) {
            if (formField.tagName == "PAPER-CHIP-INPUT-AUTOCOMPLETE") {
              formField.items = this._preSelectItemFromValues(formField.id, data);
            }
          } else {
            if (formField.tagName == "PAPER-CHIP-INPUT-AUTOCOMPLETE") {
              formField.items = [];
            }
          }
        }
      }

      _getElementValue(prop) {
        let formField = this.shadowRoot.querySelector('[name=' + prop + ']');
        let value = "";
        if (formField) {
          if (formField.tagName == "PAPER-CHIP-INPUT-AUTOCOMPLETE") {
            /** This is for collections **/
            value = this._getValuesFromSelectedColletion(formField.id, formField.items);
          } else if (formField.tagName == "PAPER-CHECKBOX") {
            value = Boolean(formField.checked);
          } else if (formField.tagName == "PAPER-DROPDOWN-MENU") {
            let item = formField.selectedItem;
            value = item.dataset.key;
          } else {
            value = formField.value;
          }
        }
        return value;
      }
    }
  }
</script>